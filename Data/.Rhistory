GET(url)
# Data Download -----------------------------------------------------------
GET(url)
# Data Download -----------------------------------------------------------
content(GET(url))
# Data Download -----------------------------------------------------------
httr_error(GET(url))
# Data Download -----------------------------------------------------------
GET(url)
library("glue")
months <- month(1:12)
months
year_month
library("tidyverse")
library("lubridate")
library("rebus")
library("xts")
library("here")
library("filesstrings")
library("readxl")
library("xts")
library("httr")
library("glue")
# Functions ---------------------------------------------------------------
CPI_zip_excel_download <- function(url, filename) {
download.file(url, paste0(filename, ".zip"), method = "auto")
outDir <- here()
unzip(paste0(filename, ".zip"), exdir = outDir)
file.remove(here("CPI_average_prices.zip"), recursive = TRUE)
file.rename(here("CPI_Average Prices_All urban(202010).xlsx"), here(paste0(filename, ".xlsx")))
}
# URL ---------------------------------------------------------------------
base_url <- "http://www.statssa.gov.za/timeseriesdata/Excel/P0141%20-%20CPI%20Average%20Prices%20All%20urban%20"
suppl_url <- ".zip"
year <- year(Sys.Date())
publication_lag <- month(1)
month <- month(Sys.Date()) - publication_lag
year_month <- paste0(year, month)
year_month
expand_grid(year, months)
expand_grid(year, months) %>%
glue_data("http://www.statssa.gov.za/timeseriesdata/Excel/P0141%20-%20CPI%20Average%20Prices%20All%20urban%20({year}{months}).zip" )
urls <- expand_grid(year, months) %>%
glue_data("http://www.statssa.gov.za/timeseriesdata/Excel/P0141%20-%20CPI%20Average%20Prices%20All%20urban%20({year}{months}).zip" )
download_mapper <- safely(~download.file(.x), "filname.zip")
walk(urls, download_mapper)
urls <- expand_grid(year, months) %>%
glue_data("http://www.statssa.gov.za/timeseriesdata/Excel/P0141%20-%20CPI%20Average%20Prices%20All%20urban%20({year}{months}).zip" )
download_mapper <- safely(~download.file(.x), "filname.zip")
walk(urls, download_mapper)
download <- walk(urls, download_mapper)
download
urls <- expand_grid(year, months) %>%
glue_data("http://www.statssa.gov.za/timeseriesdata/Excel/P0141%20-%20CPI%20Average%20Prices%20All%20urban%20({year}{months}).zip" )
download_mapper <- safely(~download.file(.x), "filname.zip", method = "auto")
download <- walk(urls, download_mapper
download
download
download <- map(urls, download_mapper)
download
urls <- expand_grid(year, months) %>%
glue_data("http://www.statssa.gov.za/timeseriesdata/Excel/P0141%20-%20CPI%20Average%20Prices%20All%20urban%20({year}{months}).zip" )
download_mapper <- safely(~download.file(.x, "filname.zip", method = "auto"))
download <- map(urls, download_mapper)
download
urls <- expand_grid(year, months) %>%
glue_data("http://www.statssa.gov.za/timeseriesdata/Excel/P0141%20-%20CPI%20Average%20Prices%20All%20urban%20({year}{months}).zip" )
download_mapper <- safely(~download.file(.x, "filname.zip", method = "auto"))
download <- walk(urls, download_mapper)
here()
file_names <- expand_grid(year_months) %>%
glue_data("CPI_averageprices_{year}{months}.zip")
file_names <- expand_grid(year, months) %>%
glue_data("CPI_averageprices_{year}{months}.zip")
file_names
urls <- expand_grid(year, months) %>%
glue_data("http://www.statssa.gov.za/timeseriesdata/Excel/P0141%20-%20CPI%20Average%20Prices%20All%20urban%20({year}{months}).zip" )
file_names <- expand_grid(year, months) %>%
glue_data("CPI_averageprices_{year}{months}.zip")
download_mapper <- safely(~download.file(.x, .y, method = "auto"))
walk2(urls, file_names, download_mapper)
download <- function(){
months <- month(1:12)
urls <- expand_grid(year, months) %>%
glue_data("http://www.statssa.gov.za/timeseriesdata/Excel/P0141%20-%20CPI%20Average%20Prices%20All%20urban%20({year}{months}).zip" )
file_names <- expand_grid(year, months) %>%
glue_data("CPI_averageprices_{year}{months}.zip")
download_mapper <- safely(~download.file(.x, .y, method = "auto"))
walk2(urls, file_names, download_mapper)
}
CPI_unzip_excel <- function(filename) {
outDir <- here()
unzip(paste0(filename, ".zip"), exdir = outDir)
file.remove(here("CPI_average_prices.zip"), recursive = TRUE)
file.rename(here("CPI_Average Prices_All urban(202010).xlsx"), here(paste0(filename, ".xlsx")))
}
# Data Download -----------------------------------------------------------
download()
# Data Download -----------------------------------------------------------
download()
library("tidyverse")
library("lubridate")
library("rebus")
library("xts")
library("here")
library("filesstrings")
library("readxl")
library("xts")
library("httr")
library("glue")
# Functions ---------------------------------------------------------------
download <- function(){
months <- month(1:12)
urls <- expand_grid(year, months) %>%
glue_data("http://www.statssa.gov.za/timeseriesdata/Excel/P0141%20-%20CPI%20Average%20Prices%20All%20urban%20({year}{months}).zip" )
file_names <- expand_grid(year, months) %>%
glue_data("CPI_averageprices_{year}{months}.zip")
download_mapper <- safely(~download.file(.x, .y, method = "auto"))
walk2(urls, file_names, download_mapper)
}
CPI_unzip_excel <- function(filename) {
outDir <- here()
unzip(paste0(filename, ".zip"), exdir = outDir)
file.rename(here("CPI_Average Prices_All urban(202010).xlsx"), here(paste0(filename, ".xlsx")))
}
# URL ---------------------------------------------------------------------
base_url <- "http://www.statssa.gov.za/timeseriesdata/Excel/P0141%20-%20CPI%20Average%20Prices%20All%20urban%20"
suppl_url <- ".zip"
year <- year(Sys.Date())
months <- month(1:12)
# Data Download -----------------------------------------------------------
download()
library("tidyverse")
library("lubridate")
library("rebus")
library("xts")
library("here")
library("filesstrings")
library("readxl")
library("xts")
library("httr")
library("glue")
# Functions ---------------------------------------------------------------
download <- function(){
months <- month(1:12)
urls <- expand_grid(year, months) %>%
glue_data("http://www.statssa.gov.za/timeseriesdata/Excel/P0141%20-%20CPI%20Average%20Prices%20All%20urban%20({year}{months}).zip" )
file_names <- expand_grid(year, months) %>%
glue_data("CPI_average_prices_{year}{months}.zip")
download_mapper <- safely(~download.file(.x, .y, method = "auto"))
walk2(urls, file_names, download_mapper)
}
CPI_unzip_excel <- function(filename) {
outDir <- here()
unzip(paste0(filename, ".zip"), exdir = outDir)
file.rename(here("CPI_Average Prices_All urban(202010).xlsx"), here(paste0(filename, ".xlsx")))
}
# URL ---------------------------------------------------------------------
base_url <- "http://www.statssa.gov.za/timeseriesdata/Excel/P0141%20-%20CPI%20Average%20Prices%20All%20urban%20"
suppl_url <- ".zip"
year <- year(Sys.Date())
months <- month(1:12)
# Data Download -----------------------------------------------------------
download()
CPI_unzip_excel("CPI_average_prices")
download <- function(){
months <- month(1:12)
urls <- expand_grid(year, months) %>%
glue_data("http://www.statssa.gov.za/timeseriesdata/Excel/P0141%20-%20CPI%20Average%20Prices%20All%20urban%20({year}{months}).zip" )
file_names <- expand_grid(year, months) %>%
glue_data("CPI_average_prices_{year}{months}.zip")
download_mapper <- safely(~download.file(.x, .y, method = "auto"))
map(urls, file_names, download_mapper)
}
# Data Download -----------------------------------------------------------
download()
download <- function(){
months <- month(1:12)
urls <- expand_grid(year, months) %>%
glue_data("http://www.statssa.gov.za/timeseriesdata/Excel/P0141%20-%20CPI%20Average%20Prices%20All%20urban%20({year}{months}).zip" )
file_names <- expand_grid(year, months) %>%
glue_data("CPI_average_prices_{year}{months}.zip")
download_mapper <- safely(~download.file(.x, .y, method = "auto"))
ma
# Data Download -----------------------------------------------------------
download()
# Data Download -----------------------------------------------------------
download()
download <- function(){
months <- month(1:12)
urls <- expand_grid(year, months) %>%
glue_data("http://www.statssa.gov.za/timeseriesdata/Excel/P0141%20-%20CPI%20Average%20Prices%20All%20urban%20({year}{months}).zip" )
file_names <- expand_grid(year, months) %>%
glue_data("CPI_average_prices_{year}{months}.zip")
download_mapper <- safely(~download.file(.x, .y, method = "auto"))
map2(urls, file_names, download_mapper)
}
# Data Download -----------------------------------------------------------
download()
# Data Download -----------------------------------------------------------
D <- download()
D
map(D, result)
map(D$result)
D$result
map(D, D$result)
map(D, ~result)
library("tidyverse")
library("lubridate")
library("rebus")
library("xts")
library("here")
library("filesstrings")
library("readxl")
library("xts")
library("httr")
library("glue")
# Functions ---------------------------------------------------------------
download <- function(){
months <- month(1:12)
urls <- expand_grid(year, months) %>%
glue_data("http://www.statssa.gov.za/timeseriesdata/Excel/P0141%20-%20CPI%20Average%20Prices%20All%20urban%20({year}{months}).zip" )
file_names <- expand_grid(year, months) %>%
glue_data("CPI_average_prices_{year}{months}.zip")
download_mapper <- safely(~download.file(.x, .y, method = "auto"))
walk2(urls, file_names, download_mapper)
}
CPI_unzip_excel <- function(filename) {
outDir <- here()
unzip(paste0(filename, ".zip"), exdir = outDir)
file.rename(here("CPI_Average Prices_All urban(202010).xlsx"), here(paste0(filename, ".xlsx")))
}
# URL ---------------------------------------------------------------------
base_url <- "http://www.statssa.gov.za/timeseriesdata/Excel/P0141%20-%20CPI%20Average%20Prices%20All%20urban%20"
suppl_url <- ".zip"
year <- year(Sys.Date())
months <- month(1:12)
# Data Download -----------------------------------------------------------
download()
CPI_unzip_excel("CPI_average_prices_202011")
library("tidyverse")
library("lubridate")
library("rebus")
library("xts")
library("here")
library("filesstrings")
library("readxl")
library("xts")
library("httr")
library("glue")
# Functions ---------------------------------------------------------------
download <- function(){
months <- month(1:12)
urls <- expand_grid(year, months) %>%
glue_data("http://www.statssa.gov.za/timeseriesdata/Excel/P0141%20-%20CPI%20Average%20Prices%20All%20urban%20({year}{months}).zip" )
file_names <- expand_grid(year, months) %>%
glue_data("CPI_average_prices_{year}{months}.zip")
download_mapper <- safely(~download.file(.x, .y, method = "auto"))
walk2(urls, file_names, download_mapper)
}
CPI_unzip_excel <- function(filename) {
outDir <- here()
unzip(paste0(filename, ".zip"), exdir = outDir)
file.rename(here("CPI_Average Prices_All urban(202011).xlsx"), here(paste0(filename, ".xlsx")))
}
# URL ---------------------------------------------------------------------
base_url <- "http://www.statssa.gov.za/timeseriesdata/Excel/P0141%20-%20CPI%20Average%20Prices%20All%20urban%20"
suppl_url <- ".zip"
year <- year(Sys.Date())
months <- month(1:12)
# Data Download -----------------------------------------------------------
download()
CPI_unzip_excel("CPI_average_prices_202011")
library("tidyverse")
library("lubridate")
library("rebus")
library("xts")
library("here")
library("filesstrings")
library("readxl")
library("xts")
library("httr")
library("glue")
# Functions ---------------------------------------------------------------
download <- function(){
urls <- expand_grid(year, months) %>%
glue_data("http://www.statssa.gov.za/timeseriesdata/Excel/P0141%20-%20CPI%20Average%20Prices%20All%20urban%20({year}{months}).zip" )
file_names <- expand_grid(year, months) %>%
glue_data("CPI_average_prices_{year}{months}.zip")
download_mapper <- safely(~download.file(.x, .y, method = "auto"))
walk2(urls, file_names, download_mapper)
}
CPI_unzip_excel <- function(filename) {
outDir <- here()
unzip(paste0(filename, ".zip"), exdir = outDir)
}
# URL ---------------------------------------------------------------------
year <- year(Sys.Date())
months <- month(1:12)
# Data Download -----------------------------------------------------------
download()
CPI_unzip_excel("CPI_average_prices_202011")
source('~/Desktop/EU_Analysis/Sweave/EU_2020_12/Data/Statssa_CPI_Average_Prices.R')
publication_month <- month(Sys.Date()) - month(1)
publication_month
# Data Import -------------------------------------------------------------
CPI_average_prices <- read_excel(here("CPI_Average Price_All urban(glue_data({year}{publication_month}).xlsx"), col_names = TRUE)
# Data Import -------------------------------------------------------------
CPI_average_prices <- read_excel(here(glu_data("CPI_Average Price_All urban({year}{publication_month}.xlsx")), col_names = TRUE)
# Data Import -------------------------------------------------------------
CPI_average_prices <- read_excel(here(glue_data("CPI_Average Price_All urban({year}{publication_month}.xlsx")), col_names = TRUE)
# Data Import -------------------------------------------------------------
CPI_average_prices <- read_excel(here(paste0("CPI_Average Price_All urban(", year,publication_month."xlsx")), col_names = TRUE)
# Data Import -------------------------------------------------------------
CPI_average_prices <- read_excel(here(paste0("CPI_Average Price_All urban(", year,publication_month, ").xlsx")), col_names = TRUE)
# Data Import -------------------------------------------------------------
CPI_average_prices <- read_excel(here(paste0("CPI_Average Price_All urban(", year , publication_month, ").xlsx")), col_names = TRUE)
library("tidyverse")
library("lubridate")
library("rebus")
library("xts")
library("here")
library("filesstrings")
library("readxl")
library("xts")
library("httr")
library("glue")
# Functions ---------------------------------------------------------------
download <- function(){
urls <- expand_grid(year, months) %>%
glue_data("http://www.statssa.gov.za/timeseriesdata/Excel/P0141%20-%20CPI%20Average%20Prices%20All%20urban%20({year}{months}).zip" )
file_names <- expand_grid(year, months) %>%
glue_data("CPI_average_prices_{year}{months}.zip")
download_mapper <- safely(~download.file(.x, .y, method = "auto"))
walk2(urls, file_names, download_mapper)
}
CPI_unzip_excel <- function(filename) {
outDir <- here()
unzip(paste0(filename, ".zip"), exdir = outDir)
file.rename(here("CPI_Average Prices_All urban(202011).xlsx"), here(paste0(filename, ".xlsx")))
}
# URL ---------------------------------------------------------------------
year <- year(Sys.Date())
months <- month(1:12)
# Data Download -----------------------------------------------------------
download()
CPI_unzip_excel("CPI_average_prices_202011")
library("tidyverse")
library("lubridate")
library("rebus")
library("xts")
library("here")
library("filesstrings")
library("readxl")
library("xts")
library("httr")
library("glue")
# Functions ---------------------------------------------------------------
download <- function(){
urls <- expand_grid(year, months) %>%
glue_data("http://www.statssa.gov.za/timeseriesdata/Excel/P0141%20-%20CPI%20Average%20Prices%20All%20urban%20({year}{months}).zip" )
file_names <- expand_grid(year, months) %>%
glue_data("CPI_average_prices_{year}{months}.zip")
download_mapper <- safely(~download.file(.x, .y, method = "auto"))
walk2(urls, file_names, download_mapper)
}
CPI_unzip_excel <- function(filename) {
outDir <- here()
unzip(paste0(filename, ".zip"), exdir = outDir)
file.rename(here("CPI_Average Prices_All urban(202011).xlsx"), here(paste0(filename, ".xlsx")))
}
# URL ---------------------------------------------------------------------
year <- year(Sys.Date())
months <- month(1:12)
# Data Download -----------------------------------------------------------
download()
CPI_unzip_excel("CPI_average_prices_202011")
urls
library("tidyverse")
library("lubridate")
library("rebus")
library("xts")
library("here")
library("filesstrings")
library("readxl")
library("xts")
library("httr")
library("glue")
# Functions ---------------------------------------------------------------
download <- function(){
urls <- expand_grid(year, months) %>%
glue_data("http://www.statssa.gov.za/timeseriesdata/Excel/P0141%20-%20CPI%20Average%20Prices%20All%20urban%20({year}{months}).zip" )
urls
urls
library("tidyverse")
library("lubridate")
library("rebus")
library("xts")
library("here")
library("filesstrings")
library("readxl")
library("xts")
library("httr")
library("glue")
# Functions ---------------------------------------------------------------
download <- function(){
urls <- expand_grid(year, months) %>%
glue_data("http://www.statssa.gov.za/timeseriesdata/Excel/P0141%20-%20CPI%20Average%20Prices%20All%20urban%20({year}{months}).zip" )
file_names <- expand_grid(year, months) %>%
glue_data("CPI_average_prices_{year}{months}.zip")
download_mapper <- safely(~download.file(.x, .y, method = "auto"))
walk2(urls, file_names, download_mapper)
}
CPI_unzip_excel <- function(filename) {
outDir <- here()
unzip(paste0(filename, ".zip"), exdir = outDir)
file.rename(here("CPI_Average Prices_All urban(202011).xlsx"), here(paste0(filename, ".xlsx")))
}
# URL ---------------------------------------------------------------------
year <- year(Sys.Date())
months <- month(1:12)
# Data Download -----------------------------------------------------------
download()
CPI_unzip_excel("CPI_average_prices_202011")
# URL ---------------------------------------------------------------------
year <- year(Sys.Date()) - month(1)
year
# URL ---------------------------------------------------------------------
year <- year(Sys.Date())
year
?Sys.time
# URL ---------------------------------------------------------------------
year <- ym(Sys.Date())
# URL ---------------------------------------------------------------------
year <- ymd(Sys.Date())
# URL ---------------------------------------------------------------------
year <- ymd(Sys.Date())
year
# URL ---------------------------------------------------------------------
year <- ymd(Sys.Date()) - month(1)
year
month(1)
# URL ---------------------------------------------------------------------
year <- ymd(Sys.Date()) - 30
year
# URL ---------------------------------------------------------------------
year <- year(ymd(Sys.Date()) - 30)
year
library("tidyverse")
library("lubridate")
library("rebus")
library("xts")
library("here")
library("filesstrings")
library("readxl")
library("xts")
library("httr")
library("glue")
# Functions ---------------------------------------------------------------
download <- function(){
urls <- expand_grid(year, months) %>%
glue_data("http://www.statssa.gov.za/timeseriesdata/Excel/P0141%20-%20CPI%20Average%20Prices%20All%20urban%20({year}{months}).zip" )
file_names <- expand_grid(year, months) %>%
glue_data("CPI_average_prices_{year}{months}.zip")
download_mapper <- safely(~download.file(.x, .y, method = "auto"))
walk2(urls, file_names, download_mapper)
}
CPI_unzip_excel <- function(filename) {
outDir <- here()
unzip(paste0(filename, ".zip"), exdir = outDir)
file.rename(here("CPI_Average Prices_All urban(202011).xlsx"), here(paste0(filename, ".xlsx")))
}
# URL ---------------------------------------------------------------------
year <- year(ymd(Sys.Date()) - 30)
months <- month(1:12)
# Data Download -----------------------------------------------------------
download()
CPI_unzip_excel("CPI_average_prices_202011")
library("tidyverse")
library("lubridate")
library("rebus")
library("xts")
library("here")
library("filesstrings")
library("readxl")
library("xts")
library("httr")
library("glue")
# Functions ---------------------------------------------------------------
download <- function(){
urls <- expand_grid(year, months) %>%
glue_data("http://www.statssa.gov.za/timeseriesdata/Excel/P0141%20-%20CPI%20Average%20Prices%20All%20urban%20({year}{months}).zip" )
file_names <- expand_grid(year, months) %>%
glue_data("CPI_average_prices_{year}{months}.zip")
download_mapper <- safely(~download.file(.x, .y, method = "auto"))
walk2(urls, file_names, download_mapper)
}
CPI_unzip_excel <- function(filename) {
outDir <- here()
unzip(paste0(filename, ".zip"), exdir = outDir)
file.rename(here("CPI_Average Prices_All urban(202011).xlsx"), here(paste0(filename, ".xlsx")))
}
# URL ---------------------------------------------------------------------
delay = 30 # delay for twelve month
year <- year(ymd(Sys.Date()) - delay)
months <- month(1:12)
# Data Download -----------------------------------------------------------
download()
CPI_unzip_excel("CPI_average_prices_202011")
Sys.Date()) - delay
ymd(Sys.Date()) - delay
source('~/Desktop/EU_Analysis/Sweave/EU_2020_12/Data/OECD.R')
